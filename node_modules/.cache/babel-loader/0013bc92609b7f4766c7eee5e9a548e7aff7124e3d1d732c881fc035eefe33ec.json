{"ast":null,"code":"import _objectSpread from\"C:/Users/Doddie_IT/Documents/Doddie/ats-kit-react/MrRobotdude.github.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useState}from\"react\";import{Modal,ModalBody,FormGroup,Label,Input,Button,Alert,Container,Row,Col}from\"reactstrap\";import ReCAPTCHA from\"react-google-recaptcha\";import{createMessage}from\"api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ContactModal(props){const[alert,setAlert]=useState(false);const{modal,toggleModal,selectedEmail,setSelectedEmail,onSuccess}=props;const[formData,setFormData]=useState({name:\"\",phoneNumber:\"\",email:\"\",message:\"\"});const[captchaToken,setCaptchaToken]=useState(\"\");const[loading,setLoading]=useState(false);const[errors,setErrors]=useState([]);const handleInputChange=useCallback(e=>{const{name,value}=e.target;setFormData(prevData=>_objectSpread(_objectSpread({},prevData),{},{[name]:value}));},[]);const handleSelectEmail=useCallback(e=>{setSelectedEmail(e.target.value);},[setSelectedEmail]);const handleCaptchaChange=useCallback(token=>{setCaptchaToken(token);},[]);const validateForm=useCallback(()=>{const{name,phoneNumber,email,message}=formData;const validationErrors=[];if(!name.trim()){validationErrors.push(\"Please enter your name.\");}if(!/^\\d{7,15}$/.test(phoneNumber)){validationErrors.push(\"Please enter a valid phone number.\");}if(!/\\S+@\\S+\\.\\S+/.test(email)){validationErrors.push(\"Please enter a valid email address.\");}if(!message.trim()){validationErrors.push(\"Please enter your message.\");}if(!captchaToken){validationErrors.push(\"Please complete the CAPTCHA.\");}if(validationErrors.length>0){setErrors(validationErrors);setAlert(true);return false;}return true;},[formData,captchaToken]);const resetForm=useCallback(()=>{setFormData({name:\"\",phoneNumber:\"\",email:\"\",message:\"\"});setCaptchaToken(\"\");setSelectedEmail(\"\");setErrors([]);setAlert(false);},[setSelectedEmail]);const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);setErrors([]);try{await createMessage(selectedEmail,formData.name,formData.phoneNumber,formData.email,formData.message);onSuccess(\"Your message has been sent successfully! ðŸš€ We're thrilled to assist you and will get back to you as soon as possible. Thank you for reaching out to us!\");handleToggleModal();resetForm();}catch(err){setErrors([\"Failed to send message. Please try again later.\"]);setAlert(true);}finally{setLoading(false);}};const handleToggleModal=()=>{setAlert(false);toggleModal();};return/*#__PURE__*/_jsxs(Modal,{isOpen:modal,toggle:handleToggleModal,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close\",type:\"button\",onClick:handleToggleModal,children:/*#__PURE__*/_jsx(\"i\",{className:\"now-ui-icons ui-1_simple-remove\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"title title-up\",children:\"Contact Us\"})]}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsxs(Input,{type:\"select\",name:\"selectedEmail\",id:\"emailSelect\",value:selectedEmail,onChange:handleSelectEmail,children:[/*#__PURE__*/_jsx(\"option\",{value:\"CP-001\",children:\"Customer Service\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CP-002\",children:\"Marketing\"})]})}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"nameInput\",children:\"Name\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"name\",id:\"nameInput\",value:formData.name,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"phoneInput\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(Input,{type:\"tel\",name:\"phoneNumber\",id:\"phoneInput\",value:formData.phoneNumber,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"emailInput\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"email\",id:\"emailInput\",value:formData.email,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"messageTextarea\",children:\"Message\"}),/*#__PURE__*/_jsx(Input,{type:\"textarea\",name:\"message\",id:\"messageTextarea\",value:formData.message,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(ReCAPTCHA,{sitekey:process.env.REACT_APP_SITE_KEY,onChange:handleCaptchaChange}),alert&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",isOpen:alert,children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:\"11\",className:\"m-0 p-0\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"m-0 p-0 ml-3\",children:errors.map((error,index)=>/*#__PURE__*/_jsx(\"li\",{children:error},index))})}),/*#__PURE__*/_jsx(Col,{xs:\"1\",className:\"m-0 p-0\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",onClick:()=>setAlert(false),children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"i\",{className:\"now-ui-icons ui-1_simple-remove\"})})})})]})})}),/*#__PURE__*/_jsx(Button,{color:\"info\",type:\"submit\",disabled:loading,children:loading?\"Sending...\":\"Submit\"}),/*#__PURE__*/_jsx(Button,{color:\"danger\",type:\"button\",onClick:handleToggleModal,children:\"Cancel\"})]})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}